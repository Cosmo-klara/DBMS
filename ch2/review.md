# 2 数据模型

## 2.1 E-R 概念模型（实体-联系模型）

E-R 图中三个基本成分：

+ 实体：客观存在并可相互区别的事物，矩形框

> 弱实体（如家长）：双框矩形，与菱形框双线连接；依赖于其他实体存在，不一定有标识属性，所依赖的为强实体

> 子类实体：矩形双边竖线，与上层用中间有圆圈的单线连接；上层称为超类

+ 属性：实体所具有的某一特征或性质，椭圆形框

> 实体标识符：能标识一个实体集每个个体的一个或一组属性

+ 联系：实体内部各属性之间的联系，不同实体集之间的联系（1：1，1：n，m：n），菱形框

> 实体间联系的约束称为基数比约束

> 实体集中实体是否全部参与联系来描述实体参与联系的约束，称为参与约束；实体参与联系的最小和最大次数构成参与度（m，n）

## 2.2 层次数据模型

> 数据库系统中最早出现的数据模型，IBM 的 IMS

### 概述

层次模型**按照层次结构组织数据**，用**树型结构表示各类实体及实体之间的联系**，**每个结点代表一种记录类型**：

+ 有且只有一个节点(根节点)无双亲节点

+ 其他结点只能有一个双亲结点

### 结构特点：

+ 层次模型**基本数据结构: 记录和由记录组成的层次结构**

+ **存取数据的基本单位是记录**，由若干字段组成

+ **可存取的最小数据单位是数据项**

### 优点：

+ 数据结构比较简单，清晰

+ 查询效率高

+ 提供了良好的数据完整性支持

### 缺点：

+ 不能直接表示实体间多对多的关系，只能表示一对多关系(一对一当然也行)，对非层次型的m：n联系需要引入虚拟指针或冗余数据，增加系统开销，导致数据的不一致

+ 对数据的插入和删除的操作限制太多

+ 查询子女结点必须通过双亲结点。

+ 由于结构严密，层次命令趋于程序化

## 2.3 网状数据模型

> 典例：DBTG

> 网状模型的结点间的联系可以是任意的，任何二个结点间都能发生联系，更适于描述客观世界

### 概述

+ 允许一个以上的结点无双亲

+ 一个结点可以有多于一个的双亲

### 结构特点

+ **存取数据的基本单位是记录**，由若干字段组成

+ **可存取的最小数据单位是数据项**

### 优点

+ 能够更为直接地描述现实世界，如一个结点可以由多个双亲

+ 用指针实现数据之间的联系，存取效率高

### 缺点

+ 结构比较复杂，而且随着应用环境的扩大，数据库的结构就变的越来越复杂，不利于最终用户掌握

+ 其 DDL、DML语言复杂，用户不容易使用；访问数据时必须自行选择存取路径，增加了程序编写的负担

## 2.4 关系数据模型

> 目前数据库系统中应用最普遍的系统

### 概述

将数据和数据之间的联系都组织成关系的数据模型，用表格来实现实体及实体间的联系

### 结构特点

+ **基本数据结构：二维表，一张二维表称为一个关系**

    + 关系：二维表，一个关系可用来描述一个实体集，**存放标识实体的数据和实体间的联系**

    + 属性：二维表的列，描述实体的不同特征

    + 域：**域是属性的取值范围，是同类型值的集合**，在关系中，要求域是不可再分的，即域值是原子值的集合

    + 元组：关系是元组的结合，一个元组对应实体集中的一个个体，元组中分量为属性值

    + 键：一个或多个属性的组合，唯一标识一个元组，选定一个为主键，则其余为候选键

+ 关系模型：对关系结构的描述，一个关系用一个关系模式描述，关系数据库模式是一组关系模式的集合，这一组关系模式对应的关系的集合称为关系数据库

+ 在关系模型中，**实体间的联系是通过不同关系中的同名属性实现的**

### 关系模型的数据完整性约束

> 为了维护数据库中的数据与现实世界的一致性

对实体完整性的约束，对实体间联系的约束（参照完整性约束）和用户定义的完整性约束

### 关系模式中的数据操纵

查询、插入、删除和修改 ————> 关系运算：

+ 关系代数
+ 关系演算
    
    + 元组关系演算

    + 域关系演算

### 优点

+ 数据结构简单
    关系数据库中的数据结构是单一的二维表格，这些表格是独立存在的，表之间的联系一般用公共属性名表示，而没有象网状和层次数据模型那样的指针链接，简化了数据定义，数据操纵也变得简单。
+ 一体化的数据子语言
    支持网状和层次数据模型的DBMS,其数据语言分为数据定义和数据操纵语言，他们有不同的语法结构，各自完成不同的功能，而关系数据子语言将这些功能合为一体，既可进行查询、更新等数据操作，又具有数据定义和控制功能，在进行数据操纵的同时还可动态的修改数据结构，使用方便，提高了编程效率。
+ 数据独立性高
    关系数据库中，数据库的逻辑结构和对数据的操作不涉及数据的存取方法和存取路径，它完全独立于数据的存储方式，因而用户不必关心数据的物理存储细节。另外，当数据模式发生变化时，可通过连接、投影等运算重新定义用户视图，使原有程序不受影响。具有很高的逻辑独立性。
+ 面向集合的存取方式
    网状与层次数据库一次只能存取一个记录，而关系数据库可以在关系一级进行运算，一次查询结果可以得到一组元组记录，对数据的其它操作也可以一次多个元组进行。语言简炼，非过程化程度高。
+ 坚实的理论基础
    关系数据库的研究是建立在严格的数学概念基础上的，如集合论，一阶谓词逻辑等。此外，还有关系的规范化和查询优化等理论。这些研究成果使对数据库技术的研究从经验发展到科学的高度，给数据库技术的进一步研究奠定了坚实的理论基础。
+ 有利于开展其他应用
    关系数据库为各种非预期查询提供了有效的支持。这为数据库的应用向高层决策管理发展提供了便利，而关系数据语言与一阶谓词逻辑的固有内在联系，为以关系数据库为基础的推理系统和知识库的研究提供了便利。

### 缺点

+ 语义贫乏，不能明确地表示实体间的联系

+ 不能很好的描述复杂对象，需要多个关系模式才能表示复杂对象

## 对象关系数据模型

> 典例：OODBS（新）, ORDBS（融合）

对象：**由一组数据结构和在这组数据结构上的操作的程序代码封装起来的基本单位**

概念：

+ 对象：现实世界中存在的一切事物都可以称为对象。它可以是一个简单对象，如一个整数，一个字符串，也可以是一个复杂对象，如一辆汽车、一个可执行程序段等。每个对象有一个唯一的标识，称为对象标识符。

+ 类： 定义具有某些相似以特征对象的对象类，代表了它所表示对象的类型。类中的对象称为实例，类由实例变量和方法描述，实例变量描述对象的结构，方法是定义在对象实例上的操作。类有子类和超类，子类可以继承超类的特性。类和子类及超类形成了类层次结构。

+ 属性：描述对象的状态、组成和特性

+ 消息：发送给某个对象的动作标识符，它指示对象执行某些动作。由于对象是封装的，对对象中实例变量和方法的存取和调用只能通过给对象发消息实现，执行结果也由消息的形式返回。

+ 方法：消息的实现，描述对象的行为特性，是定义在对象实例上的一组操作。方法定义对象如何响应消息的细节。

+ 封装：一种信息隐蔽技术，它把对象的特征和行为隐蔽起来，使得一个对象可以作为一个独立的整体使用而不用担心对象的功能受到影响。

+ 继承：继承支持层次分类的观点，即继承只有在类按层次排列时才有意义。一个类可以从另一个类中继承其特征，包括数据和方法。子类可以继承其直接超类及祖先的特征。